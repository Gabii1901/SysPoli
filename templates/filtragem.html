<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FilterTrack - Filtragem</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>FilterTrack - Filtragem de Documentos</h1>

    <form id="form-filtragem">
        <label for="data-inicial">Data Inicial:</label>
        <input type="date" id="data-inicial" name="data_inicial" required>

        <label for="data-final">Data Final:</label>
        <input type="date" id="data-final" name="data_final" required>

        <label for="fornecedor">Nome do Fornecedor:</label>
        <input type="text" id="fornecedor" name="fornecedor" placeholder="Digite o nome do fornecedor">

        <label for="cnpj">CNPJ/Razão Social:</label>
        <input type="text" id="cnpj" name="cnpj" placeholder="Digite o CNPJ ou Razão Social">

        <button type="submit">Filtrar</button>
    </form>

    <div id="result"></div>

    <script>
        // Função para enviar o formulário via AJAX e exibir os resultados sem recarregar a página
        document.getElementById('form-filtragem').addEventListener('submit', function (e) {
            e.preventDefault();

            const formData = new FormData(this);

            fetch('/filtrar', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Exibe os resultados no div 'result'
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = JSON.stringify(data, null, 2);
            })
            .catch(error => {
                console.error('Erro ao buscar documentos:', error);
            });
        });
    </script>
</body>
</html>
